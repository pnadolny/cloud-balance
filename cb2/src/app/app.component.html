<md-toolbar color="primary">
  <span>Cloud Balance</span>

  <span class="flex-right"></span>
  <span>{{emailAddress}}</span>

</md-toolbar>


<md-tab-group>

  <md-tab label="Transactions&nbsp;({{count}})">


    <button md-tooltip="Create a Transaction" tooltip-position="below" md-button color="primary" (click)="editTransaction(null,true)">
      <md-icon >create</md-icon>&nbsp;Create
    </button>

    <filters-cmp (change)="handleFiltersChange($event)"></filters-cmp>

    <div class="table-responsive">
      <table class="table table-striped table-hover table-sm">
        <thead class="thead-inverse">
        <tr>
          <th>Date</th>
          <th>Payee</th>
          <th>Amount</th>
          <th>Balance</th>
          <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let transaction of transactions | async; let i = index" [class.selected]="transaction.today">
          <td>{{transaction.date | date:'shortDate'}}</td>
          <td><span
            class="tag tag-default tag-pill payee-type-{{transaction.type}}">{{transaction.type | uppercase}}</span>&nbsp;{{transaction.payee}}
          </td>
          <td>{{transaction.amount | currency:'USD':true}}</td>
          <td>{{transaction.balance | currency:'USD':true}}</td>
          <td>
            <div>
          <md-icon (click)="editTransaction(transaction)">edit</md-icon>&nbsp;
          <md-icon (click)="delete(transaction)">delete_forever</md-icon>&nbsp;
          <md-icon (click)="copy(transaction)">content_copy</md-icon>&nbsp;
          <md-icon (click)="copy(transaction,true)">filter_1</md-icon>&nbsp;
            </div>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </md-tab>


  <md-tab label="Cash Flow">
    <table class="table table-striped table-hover table-sm">
      <thead class="thead-inverse">
      <tr>
        <th>Month</th>
        <th><span class="tag tag-default tag-pill payee-type-i">I</span>&nbsp;Income</th>
        <th><span class="tag tag-default tag-pill payee-type-s">S</span>&nbsp;Static</th>
        <th><span class="tag tag-default tag-pill payee-type-d">D</span>&nbsp;Discretionary</th>
        <th><span class="tag tag-default tag-pill payee-type-f">F</span>&nbsp;Future</th>
        <th><span class="tag tag-default tag-pill payee-type-o">O</span>&nbsp;Other</th>
        <th>Cash Flow</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let cf of cashFlow " [class.selected]="cf.thisMonth">
        <td>{{cf.month}}</td>
        <td>{{cf.income | currency:'USD':true }}</td>
        <td>{{cf.static | currency:'USD':true }}</td>
        <td>{{cf.discretionary | currency:'USD':true }}</td>
        <td>{{cf.future | currency:'USD':true }}</td>
        <td>{{cf.other | currency:'USD':true }}</td>
        <td>{{cf.monthlyCashFlow | currency:'USD':true }}</td>
      </tr>
      </tbody>
    </table>
  </md-tab>

  <md-tab label="Payees&nbsp;({{payeeCount}})">
    <button md-tooltip="Create a Payee" tooltip-position="below" md-button color="primary" (click)="editPayee(null,true)">
      <md-icon >create</md-icon>&nbsp;Create
    </button>
    <table class="table table-striped table-hover table-sm">
      <thead class="thead-inverse">
      <tr>
        <th>Name</th>
        <th>{{currentMonth}}</th>
        <th>Total</th>
        <th>Action</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let payee of payees | async; let i = index">
        <td><span class="tag tag-default tag-pill payee-type-{{payee.type}}">{{payee.type | uppercase}}</span>&nbsp;{{payee.name}}</td>
        <td>{{payee.thisMonth | currency:'USD':true}}</td>
        <td>{{payee.total | currency:'USD':true}}</td>
        <td>
          <md-icon (click)="editPayee(payee)">edit</md-icon>&nbsp;
        <md-icon (click)="deletePayee(payee)">delete_forever</md-icon></td>
      </tr>
      </tbody>
    </table>
  </md-tab>
</md-tab-group>


